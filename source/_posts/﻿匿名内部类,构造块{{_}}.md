title: 匿名内部类,构造块{{_}}
date: 2017-12-26 00:00:00
categories: 构造块
tags: [构造块]

---
# 匿名内部类,构造块`{{_}}`
```
Map map = new HashMap() {{
    put(2, 2);
    put(1, 1);
    put(4, 4);
    put(3, 3);
}};
```
```
List list = new ArrayList() {{
    add(1);
    add(2);
    add(3);
}};
```
```
// 二维数组2map
map = ArrayUtils.toMap(new Object[][]{{1, 1}, {2, 2}, {3, 3}, {4, 4}, {5, 5}});
```
```
CountryDO countryDO = new CountryDO() {{
    setId(1);
    setCountryname("xxx");
    setCountrycode("code-xx");
}};
```
```
内部匿名类,会存在当前类的依赖(`BeanUtils`),所以会将当前类注入到内部类中. 带来的问题: `连带序列化`限制
countryDOS.add(new CountryDO() {{
    BeanUtils.copyProperties(country1, this);//此this是<当前类>,而非CountryDO
}});
```

**参考**
`Java内部类详解--成员内部类，局部内部类，匿名内部类，静态内部类 - 安静的程序媛 - 博客园`
https://www.cnblogs.com/latter/p/5665015.html

`内部类和匿名内部类的用法 - guyuealian的博客 - CSDN博客`
http://blog.csdn.net/guyuealian/article/details/51981163

`Java中普通代码块，构造代码块，静态代码块区别及代码示例 - sophine - 博客园`
https://www.cnblogs.com/sophine/p/3531282.html

